# Copyright (c) 2025 Alexsander Hamir Gomes Baptista
#
# This file is part of AtomOS and licensed under the Sustainable Use License (SUL).
# You may use, modify, and redistribute this software for personal or internal business use.
# Offering it as a commercial hosted service requires a separate license.
#
# Full license: see the LICENSE file in the root of this repository
# or contact alexsanderhamirgomesbaptista@gmail.com.

# AtomOS Block Specification Example
# By implementing this file, any piece of software becomes a block into our runtime.

name: go-profiler
description: >
  A Go-based profiler that can run, report, and generate flamegraphs.
  Provides deterministic CLI entries for AI agents to execute workflows.
version: v1.8.1
source:
  type: github
  repo: AlexsanderHamir/prof

# Platform-specific binaries (release-only, mandatory)
binary:
  from: release
  assets:
    darwin-arm64: prof-darwin-arm64

# "LSP" entries exposed by this block
lsp:
  entries:
    run:
      name: run
      command: prof run
      description: Run profiling on the target binary
      inputs:
        - name: target
          type: path
      outputs:
        - name: profile
          type: file

    report:
      name: report
      command: prof report
      description: Generate a profiling report from a saved profile
      inputs:
        - name: profile
          type: file
      outputs:
        - name: summary
          type: string

    flamegraph:
      name: flamegraph
      command: prof flamegraph
      description: Generate a flamegraph from a profile file
      inputs:
        - name: profile
          type: file
      outputs:
        - name: flamegraph
          type: svg
