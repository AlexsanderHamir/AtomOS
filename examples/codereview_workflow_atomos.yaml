workflow_name: advanced data pipeline
version: 0.2.0
description: >
  Example workflow showing branching, multiple outputs, and reusing blocks
  in different entries to create a complex agentic workflow.

blocks:
  - name: profiler
    version: 1.0.0
    github: "https://github.com/alexsandergomes/prof"

  - name: analyzer
    version: 2.1.0
    github: "https://github.com/example/analyzer"

  - name: reporter
    version: 1.3.0
    github: "https://github.com/example/reporter"

connections:
  # Step 1: Run profiler
  - from_block: profiler
    from_entry: run
    output: profile_file
    to_block: profiler
    to_entry: report
    input: profile_file

  # Step 2: Analyze the profiler report
  - from_block: profiler
    from_entry: report
    output: report_summary
    to_block: analyzer
    to_entry: analyze
    input: data_file

  # Step 3: Branch: send analysis results to reporter and back to profiler for extra reporting
  - from_block: analyzer
    from_entry: analyze
    output: analysis_result
    to_block: reporter
    to_entry: generate_summary
    input: input_data

  - from_block: analyzer
    from_entry: analyze
    output: analysis_result
    to_block: profiler
    to_entry: report
    input: profile_file

  # Step 4: Reporter generates a final document
  - from_block: reporter
    from_entry: generate_summary
    output: summary_document
    to_block: reporter
    to_entry: publish
    input: doc_file
